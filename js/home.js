!function e(t,n,r){function a(i,o){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!o&&u)return u(i,!0);if(s)return s(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){var n=t[i][1][e];return a(n?n:e)},l,l.exports,e,t,n,r)}return n[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(e,t,n){"use strict";var r=e("react"),a=(e("superagent"),e("../stores/RSVPStore")),s=r.createClass({displayName:"AttendingApp",getInitialState:function(){return{isReady:a.isLoaded(),attendees:a.getAttendees()}},componentDidMount:function(){a.addChangeListener(this.updateStateFromStore)},componentWillUnmount:function(){a.removeChangeListener(this.updateStateFromStore)},updateStateFromStore:function(){this.setState({isReady:a.isLoaded(),attendees:a.getAttendees()})},renderHeading:function(){if(!this.state.isReady)return r.createElement("h3",{className:"heading-with-line"},"...");var e=this.state.attendees?this.state.attendees.length:"...",t=1===e?" person is":" people are";return r.createElement("h3",{className:"heading-with-line"}," ",e+t," attending")},render:function(){var e;return this.state.isReady&&(e=this.state.attendees.map(function(e){return r.createElement("li",{key:e.id},r.createElement("a",{href:e.url},r.createElement("img",{width:"40",height:"40",alt:e.name,className:"img-circle",src:e.photo?e.photo:"/images/avatar.png"})))})),r.createElement("div",null,r.createElement("section",{className:"attending"},this.renderHeading(),r.createElement("ul",{className:"list-unstyled list-inline text-center attendees-list"},e)))}});t.exports=s},{"../stores/RSVPStore":4,react:"react",superagent:"superagent"}],2:[function(e,t,n){"use strict";var r=e("react"),a=(e("superagent"),e("../stores/RSVPStore")),s=r.createClass({displayName:"HeroApp",getInitialState:function(){return{user:SydJS.user,isReady:a.isLoaded(),meetup:a.getMeetup(),rsvp:a.getRSVP()}},componentDidMount:function(){a.addChangeListener(this.updateStateFromStore)},componentWillUnmount:function(){a.removeChangeListener(this.updateStoreFromState)},updateStateFromStore:function(){this.setState({isReady:a.isLoaded(),meetup:a.getMeetup(),rsvp:a.getRSVP()})},toggleRSVP:function(e){a.rsvp(e)},renderWelcome:function(){return this.state.rsvp.attending?r.createElement("h4",{className:"hero-button-title"},r.createElement("span",{className:"welcome-message"},"See you there!")):r.createElement("h4",{className:"hero-button-title"},"Are you coming? ",r.createElement("br",null)," ",r.createElement("span",{className:"spots-left"},this.state.meetup.remainingRSVPs,r.createElement("span",{className:"text-thin"}," spots left")),r.createElement("br",null))},renderLoading:function(){return r.createElement("div",{className:"hero-button"},r.createElement("div",{className:"alert alert-success mb-0 text-center"},"loading..."))},renderRSVPButton:function(){return r.createElement("div",{className:"hero-button",onClick:this.toggleRSVP.bind(this,!0)},r.createElement("a",{className:"btn btn-primary btn-lg btn-block"},"RSVP Now (",r.createElement("span",{className:"text-thin"},this.state.meetup.remainingRSVPs," spots left"),")"))},renderRSVPToggle:function(){var e=this.state.rsvp.attending?" btn-success btn-default active":null,t=this.state.rsvp.attending?null:" btn-danger btn-default active";return r.createElement("div",null,this.renderWelcome(),r.createElement("div",{className:"hero-button"},r.createElement("div",{id:"next-meetup","data-id":this.state.meetup._id,className:"form-row meetup-toggle"},r.createElement("div",{className:"col-xs-6"},r.createElement("button",{type:"button",onClick:this.toggleRSVP.bind(this,!0),className:"btn btn-lg btn-block btn-default js-rsvp-attending"+e},"Yes")),r.createElement("div",{className:"col-xs-6"},r.createElement("button",{type:"button",onClick:this.toggleRSVP.bind(this,!1),className:"btn btn-lg btn-block btn-default js-rsvp-decline"+t},"No")))))},signinModalTrigger:function(e){e.preventDefault,window.signinModalTrigger(e)},renderRSVPSignin:function(){return r.createElement("div",{className:"hero-button"},r.createElement("a",{className:"btn btn-primary btn-lg btn-block js-auth-trigger",onClick:this.signinModalTrigger},"RSVP Now ",r.createElement("span",{className:"text-thin"},"(",this.state.meetup.remainingRSVPs," spots left)")))},renderNoMoreTickets:function(){return r.createElement("div",{className:"hero-button"},r.createElement("div",{className:"alert alert-success mb-0 text-center"},"No more tickets..."))},render:function(){return this.state.isReady?this.state.user?this.state.meetup.rsvpsAvailable?this.state.rsvp.exists?this.renderRSVPToggle():this.renderRSVPButton():this.renderNoMoreTickets():this.state.meetup.rsvpsAvailable?this.renderRSVPSignin():this.renderNoMoreTickets():this.renderLoading()}});t.exports=s},{"../stores/RSVPStore":4,react:"react",superagent:"superagent"}],3:[function(e,t,n){"use strict";var r=e("react"),a=e("../components/AttendingApp.js"),s=document.getElementById("react-attending");s&&r.render(r.createElement(a,null),s);var i=e("../components/HeroApp.js"),o=document.getElementById("react-hero-button");o&&r.render(r.createElement(i,null),o)},{"../components/AttendingApp.js":1,"../components/HeroApp.js":2,react:"react"}],4:[function(e,t,n){"use strict";function r(){clearTimeout(m)}var a=(e("lodash"),e("store-prototype")),s=e("superagent"),i=new a,o=!1,u={},c={},l=[],d=5e3,m=null;i.extend({getMeetup:function(){return u},getRSVP:function(){return c},getAttendees:function(e){return l},rsvp:function(e,t){r(),s.post("/api/me/meetup").send({data:{meetup:SydJS.currentMeetupId,attending:e}}).end(function(e,t){return e?void console.log("Error with the AJAX request: ",e):void i.getMeetupData()})},isLoaded:function(){return o?!0:!1},getMeetupData:function(e){r(),s.get("/api/meetup/"+SydJS.currentMeetupId).end(function(t,n){return t&&console.log("Error with the AJAX request: ",t),!t&&n.body&&(o=!0,u=n.body.meetup,c=n.body.rsvp,l=n.body.attendees,i.notifyChange()),i.queueMeetupRefresh(),e&&e(t,n.body)})},queueMeetupRefresh:function(){m=setTimeout(i.getMeetupData,d)}}),i.getMeetupData(),t.exports=i},{lodash:"lodash","store-prototype":5,superagent:"superagent"}],5:[function(e,t,n){var r=function(){var e=[],t={};return this.notifyChange=function(n){t[n]&&t[n].forEach(function(e){e()}),e.forEach(function(e){e()})},this.addChangeListener=function(n,r){1===arguments.length&&(r=n,n=null),n?(t[n]||(t[n]=[]),t[n].push(r)):e.push(r)},this.removeChangeListener=function(n,r){1===arguments.length&&(r=n,n=null),n?t[n]&&(t[n]=t[n].filter(function(e){return r!==e})):e=e.filter(function(e){return r!==e})},this.extend.apply(this,arguments)};r.prototype.extend=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])}return this},t.exports=r},{}]},{},[3]);